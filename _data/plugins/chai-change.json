{"_id":"chai-change","_rev":"17-53abcf806e49674aaa8cb668fce9582d","name":"chai-change","description":"Assert that a change you expected to happen, happened, with the chai library","dist-tags":{"latest":"2.1.2"},"versions":{"0.0.0":{"name":"chai-change","version":"0.0.0","author":{"name":"Tim Ruffles","email":"timruffles@googlemail.com"},"description":"Assert that a change you expected to happen, happened, with the chai library","main":"src/plugin.js","directories":{"test":"test"},"scripts":{"test":"mocha"},"license":"BSD-2-Clause","devDependencies":{"chai":"~1.9.1","mocha":"~1.18.2"},"repository":{"type":"git","url":"git@github.com:timruffles/chai-change.git"},"keywords":["chai","assertions","assert","testing","chai-plugin"],"bugs":{"url":"https://github.com/timruffles/chai-change/issues"},"_id":"chai-change@0.0.0","dist":{"shasum":"03b73d2f9b4ef7089e4f61a03dd7b15862bbcaab","tarball":"https://registry.npmjs.org/chai-change/-/chai-change-0.0.0.tgz"},"_from":".","_npmVersion":"1.3.11","_npmUser":{"name":"timruffles","email":"timruffles@googlemail.com"},"maintainers":[{"name":"timruffles","email":"timruffles@googlemail.com"}]},"1.0.0":{"name":"chai-change","version":"1.0.0","author":{"name":"Tim Ruffles","email":"timruffles@googlemail.com"},"description":"Assert that a change you expected to happen, happened, with the chai library","main":"src/plugin.js","directories":{"test":"test"},"scripts":{"test":"mocha"},"license":"BSD-2-Clause","devDependencies":{"chai":"~1.9.1","mocha":"~1.18.2","requirejs":"~2.1.11"},"repository":{"type":"git","url":"git@github.com:timruffles/chai-change.git"},"keywords":["chai","assertions","assert","testing","chai-plugin"],"bugs":{"url":"https://github.com/timruffles/chai-change/issues"},"_id":"chai-change@1.0.0","dist":{"shasum":"b7a63178af5c57767785c26405888735ac03fe0d","tarball":"https://registry.npmjs.org/chai-change/-/chai-change-1.0.0.tgz"},"_from":".","_npmVersion":"1.3.11","_npmUser":{"name":"timruffles","email":"timruffles@googlemail.com"},"maintainers":[{"name":"timruffles","email":"timruffles@googlemail.com"}],"deprecated":"warning - check your chai version. only compatible with 1.x"},"1.0.1":{"name":"chai-change","version":"1.0.1","author":{"name":"Tim Ruffles","email":"timruffles@googlemail.com"},"description":"Assert that a change you expected to happen, happened, with the chai library","main":"src/plugin.js","directories":{"test":"test"},"scripts":{"test":"mocha"},"license":"BSD-2-Clause","devDependencies":{"chai":"~1.9.1","mocha":"~1.18.2","requirejs":"~2.1.11"},"peerDependencies":{"chai":"<= 1.9.1"},"repository":{"type":"git","url":"git+ssh://git@github.com/timruffles/chai-change.git"},"keywords":["chai","assertions","assert","testing","chai-plugin"],"bugs":{"url":"https://github.com/timruffles/chai-change/issues"},"gitHead":"bdbdd0ae8e65520b82be5b56ae6d07041ae6f349","homepage":"https://github.com/timruffles/chai-change#readme","_id":"chai-change@1.0.1","_shasum":"c4ad4fc8cc6beb2d47cc4c550c5b461e49aa6093","_from":".","_npmVersion":"3.3.9","_nodeVersion":"0.10.33","_npmUser":{"name":"timruffles","email":"timruffles@googlemail.com"},"dist":{"shasum":"c4ad4fc8cc6beb2d47cc4c550c5b461e49aa6093","tarball":"https://registry.npmjs.org/chai-change/-/chai-change-1.0.1.tgz"},"maintainers":[{"name":"timruffles","email":"timruffles@googlemail.com"}],"_npmOperationalInternal":{"host":"packages-16-east.internal.npmjs.com","tmp":"tmp/chai-change-1.0.1.tgz_1474644939559_0.44057122617959976"}},"1.0.2":{"name":"chai-change","version":"1.0.2","author":{"name":"Tim Ruffles","email":"timruffles@googlemail.com"},"description":"Assert that a change you expected to happen, happened, with the chai library","main":"src/plugin.js","directories":{"test":"test"},"scripts":{"test":"mocha"},"license":"BSD-2-Clause","devDependencies":{"chai":"~1.9.1","mocha":"~1.18.2","requirejs":"~2.1.11"},"peerDependencies":{"chai":"< 2.0.0"},"repository":{"type":"git","url":"git+ssh://git@github.com/timruffles/chai-change.git"},"keywords":["chai","assertions","assert","testing","chai-plugin"],"bugs":{"url":"https://github.com/timruffles/chai-change/issues"},"gitHead":"45126695cc56f3015925cef36ec6b6e2f00dba92","homepage":"https://github.com/timruffles/chai-change#readme","_id":"chai-change@1.0.2","_shasum":"c9240e5f189eb23b34079f0b7d4dca9904b33176","_from":".","_npmVersion":"3.3.9","_nodeVersion":"0.10.33","_npmUser":{"name":"timruffles","email":"timruffles@googlemail.com"},"dist":{"shasum":"c9240e5f189eb23b34079f0b7d4dca9904b33176","tarball":"https://registry.npmjs.org/chai-change/-/chai-change-1.0.2.tgz"},"maintainers":[{"name":"timruffles","email":"timruffles@googlemail.com"}],"_npmOperationalInternal":{"host":"packages-16-east.internal.npmjs.com","tmp":"tmp/chai-change-1.0.2.tgz_1474645079634_0.6668267154600471"}},"2.0.0":{"name":"chai-change","version":"2.0.0","author":{"name":"Tim Ruffles","email":"timruffles@googlemail.com"},"description":"Assert that a change you expected to happen, happened, with the chai library","main":"src/plugin.js","directories":{"test":"test"},"scripts":{"test":"mocha"},"license":"BSD-2-Clause","devDependencies":{"chai":"~1.9.1","mocha":"~1.18.2","requirejs":"~2.1.11"},"repository":{"type":"git","url":"git+ssh://git@github.com/timruffles/chai-change.git"},"keywords":["chai","assertions","assert","testing","chai-plugin"],"bugs":{"url":"https://github.com/timruffles/chai-change/issues"},"gitHead":"b585bafc8cfc7ad8ca546861737617816d7f4c21","homepage":"https://github.com/timruffles/chai-change#readme","_id":"chai-change@2.0.0","_shasum":"2b6439573fc6b0565ff21254952a2563da5af8c9","_from":".","_npmVersion":"3.3.9","_nodeVersion":"0.10.33","_npmUser":{"name":"timruffles","email":"timruffles@googlemail.com"},"dist":{"shasum":"2b6439573fc6b0565ff21254952a2563da5af8c9","tarball":"https://registry.npmjs.org/chai-change/-/chai-change-2.0.0.tgz"},"maintainers":[{"name":"timruffles","email":"timruffles@googlemail.com"}],"_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/chai-change-2.0.0.tgz_1474645225587_0.5961901179980487"}},"2.0.1":{"name":"chai-change","version":"2.0.1","author":{"name":"Tim Ruffles","email":"timruffles@googlemail.com"},"description":"Assert that a change you expected to happen, happened, with the chai library","main":"src/plugin.js","directories":{"test":"test"},"scripts":{"test":"mocha"},"license":"BSD-2-Clause","devDependencies":{"chai":"~1.9.1","mocha":"~1.18.2","requirejs":"~2.1.11"},"peerDependencies":{"chai":"< 2.0.0"},"repository":{"type":"git","url":"git+ssh://git@github.com/timruffles/chai-change.git"},"keywords":["chai","assertions","assert","testing","chai-plugin"],"bugs":{"url":"https://github.com/timruffles/chai-change/issues"},"gitHead":"7914370ba9ed52ca28114268c2f7f46303d35a0d","homepage":"https://github.com/timruffles/chai-change#readme","_id":"chai-change@2.0.1","_shasum":"4b8e84fd8b8df5cecc78e140843ffb98e786c271","_from":".","_npmVersion":"3.3.9","_nodeVersion":"0.10.33","_npmUser":{"name":"timruffles","email":"timruffles@googlemail.com"},"dist":{"shasum":"4b8e84fd8b8df5cecc78e140843ffb98e786c271","tarball":"https://registry.npmjs.org/chai-change/-/chai-change-2.0.1.tgz"},"maintainers":[{"name":"timruffles","email":"timruffles@googlemail.com"}],"_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/chai-change-2.0.1.tgz_1474645339893_0.656700691441074"}},"2.0.2":{"name":"chai-change","version":"2.0.2","author":{"name":"Tim Ruffles","email":"timruffles@googlemail.com"},"description":"Assert that a change you expected to happen, happened, with the chai library","main":"src/plugin.js","directories":{"test":"test"},"scripts":{"test":"mocha"},"license":"BSD-2-Clause","devDependencies":{"chai":"~1.9.1","mocha":"~1.18.2","requirejs":"~2.1.11"},"repository":{"type":"git","url":"git+ssh://git@github.com/timruffles/chai-change.git"},"keywords":["chai","assertions","assert","testing","chai-plugin"],"bugs":{"url":"https://github.com/timruffles/chai-change/issues"},"gitHead":"1a310a861f8275bae0296bfefb2b6deb1d52336f","homepage":"https://github.com/timruffles/chai-change#readme","_id":"chai-change@2.0.2","_shasum":"1aa268caeac51119b4a3ec358b22490562e007b0","_from":".","_npmVersion":"3.3.9","_nodeVersion":"0.10.33","_npmUser":{"name":"timruffles","email":"timruffles@googlemail.com"},"dist":{"shasum":"1aa268caeac51119b4a3ec358b22490562e007b0","tarball":"https://registry.npmjs.org/chai-change/-/chai-change-2.0.2.tgz"},"maintainers":[{"name":"timruffles","email":"timruffles@googlemail.com"}],"_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/chai-change-2.0.2.tgz_1474645403928_0.5338818430900574"}},"2.1.0":{"name":"chai-change","version":"2.1.0","author":{"name":"Tim Ruffles","email":"timruffles@googlemail.com"},"description":"Assert that a change you expected to happen, happened, with the chai library","main":"src/plugin.js","directories":{"test":"test"},"scripts":{"test":"mocha"},"license":"BSD-2-Clause","devDependencies":{"chai":"~1.9.1","es6-promise":"^4.0.5","mocha":"~1.18.2","requirejs":"~2.1.11"},"repository":{"type":"git","url":"git+ssh://git@github.com/timruffles/chai-change.git"},"keywords":["chai","assertions","assert","testing","chai-plugin"],"bugs":{"url":"https://github.com/timruffles/chai-change/issues"},"gitHead":"628452da4cf0e4f2145c384273c63ecbf9674f2b","homepage":"https://github.com/timruffles/chai-change#readme","_id":"chai-change@2.1.0","_shasum":"24d4f98e99d893a75fcedf3ecbdbad32f8c54f9c","_from":".","_npmVersion":"3.3.9","_nodeVersion":"0.10.33","_npmUser":{"name":"timruffles","email":"timruffles@googlemail.com"},"dist":{"shasum":"24d4f98e99d893a75fcedf3ecbdbad32f8c54f9c","tarball":"https://registry.npmjs.org/chai-change/-/chai-change-2.1.0.tgz"},"maintainers":[{"name":"timruffles","email":"timruffles@googlemail.com"}],"_npmOperationalInternal":{"host":"packages-18-east.internal.npmjs.com","tmp":"tmp/chai-change-2.1.0.tgz_1477401309848_0.43750101001933217"}},"2.1.1":{"name":"chai-change","version":"2.1.1","author":{"name":"Tim Ruffles","email":"timruffles@googlemail.com"},"description":"Assert that a change you expected to happen, happened, with the chai library","main":"src/plugin.js","directories":{"test":"test"},"scripts":{"test":"mocha"},"license":"BSD-2-Clause","devDependencies":{"chai":"~1.9.1","es6-promise":"^4.0.5","mocha":"~1.18.2","requirejs":"~2.1.11"},"repository":{"type":"git","url":"git+ssh://git@github.com/timruffles/chai-change.git"},"keywords":["chai","assertions","assert","testing","chai-plugin"],"bugs":{"url":"https://github.com/timruffles/chai-change/issues"},"gitHead":"6dc5f4a91fa0e8f3d4a79347a3791ae49d4574fa","homepage":"https://github.com/timruffles/chai-change#readme","_id":"chai-change@2.1.1","_shasum":"fdab2f6a35d39dc3577a12ba2b7c687ae53a54b5","_from":".","_npmVersion":"3.3.9","_nodeVersion":"0.10.33","_npmUser":{"name":"timruffles","email":"timruffles@googlemail.com"},"dist":{"shasum":"fdab2f6a35d39dc3577a12ba2b7c687ae53a54b5","tarball":"https://registry.npmjs.org/chai-change/-/chai-change-2.1.1.tgz"},"maintainers":[{"name":"timruffles","email":"timruffles@googlemail.com"}],"_npmOperationalInternal":{"host":"packages-18-east.internal.npmjs.com","tmp":"tmp/chai-change-2.1.1.tgz_1477912531234_0.44221063586883247"}},"2.1.2":{"name":"chai-change","version":"2.1.2","author":{"name":"Tim Ruffles","email":"timruffles@googlemail.com"},"description":"Assert that a change you expected to happen, happened, with the chai library","main":"src/plugin.js","directories":{"test":"test"},"scripts":{"test":"mocha","coverage":"istanbul cover --report html node_modules/mocha/bin/_mocha","lint":"eslint {src,test}/**/*.js"},"license":"BSD-2-Clause","devDependencies":{"chai":"~1.9.1","es6-promise":"^4.0.5","eslint":"^3.9.1","istanbul":"^0.4.5","mocha":"~1.18.2","requirejs":"~2.1.11"},"repository":{"type":"git","url":"git+ssh://git@github.com/timruffles/chai-change.git"},"keywords":["chai","assertions","assert","testing","chai-plugin"],"bugs":{"url":"https://github.com/timruffles/chai-change/issues"},"gitHead":"ede068b9e7b9a9e636825d94050a1306bbf67283","homepage":"https://github.com/timruffles/chai-change#readme","_id":"chai-change@2.1.2","_shasum":"1231cdf8bf5930eea1fab72b5cc4864e5bcae7f6","_from":".","_npmVersion":"3.3.9","_nodeVersion":"0.10.33","_npmUser":{"name":"timruffles","email":"timruffles@googlemail.com"},"dist":{"shasum":"1231cdf8bf5930eea1fab72b5cc4864e5bcae7f6","tarball":"https://registry.npmjs.org/chai-change/-/chai-change-2.1.2.tgz"},"maintainers":[{"name":"timruffles","email":"timruffles@googlemail.com"}],"_npmOperationalInternal":{"host":"packages-18-east.internal.npmjs.com","tmp":"tmp/chai-change-2.1.2.tgz_1478624476264_0.04053564555943012"}}},"readme":"# Chai Change\n\n[![Build Status](https://travis-ci.org/chaijs/chai-change.svg?branch=master)](https://travis-ci.org/chaijs/chai-change)\n\nAssert that a change you expected to happen, happened, with this plugin for the [chai](http://github.com/logicalparadox/chai) assertion library. The plugin works in node and the browser, asynchronously or synchronously.\n\nThe idea of the plugin is to make your tests more robust. Rather than doing:\n\n```javascript\nusers.create();\nexpect(users.count()).to.equal(1);\n```\n\ninstead assert that the action actually causes the expected change\n\n```javascript\nexpect(() => {\n  users.create();\n}).to.alter(users.count, { by: 1 });\n```\n\nThis is more robust as it avoids false positives: in this example, if `users.count()` was already 1 and `users.create()` was not implemented, the first example would still pass. Using the change expectation, since there was not a change `{by: 1}` from the starting value, the test would correctly fail.\n\n## Installation\n\n#### Node.js\n\n`chai-change` is available on npm.\n\n      $ npm install chai-change\n\n#### Browser\n\nEither install via npm, or [download `chai-change`](src/plugin.js) and save as `chai-change.js`. Then simply include after `chai.js`.\n\n```xml\n<script src=\"chai-change.js\"></script>\n```\n\n## Plug In\n\nIf you are using `chai-change` in the browser, there is nothing you need to do.\n\nIf you are using node, you just need to tell `chai` about the plugin:\n\n```js\nconst chai = require('chai');\n\nchai.use(require('chai-change'));\n```\n\n## Expect API\n\n### .change\n\nAsserts that the value returned by function passed to `change()` changes after the function has run:\n\n```javascript\nlet x = 0;\n\nexpect(() => { x += 1; }).to.alter(() => x);\nexpect(() => {         }).not.to.alter(() => x);\n```\n\nYou can pass options to be specific about the changes expected. Use the `from` key to enforce a starting value, a `to` key for and ending value, and a\n`by` key to enforce a numeric change.\n\n```javascript\nexpect(() => { x += 1 }).to.alter(() => x, { by: 1 });\nexpect(() => { x += 1 }).to.alter(() => x, { from: x });\nexpect(() => { x += 1 }).to.alter(() => x, { from: x, to: x + 1 });\nexpect(() => { x += 1 }).to.alter(() => x, { to: x + 1 });\n```\n\n## Assert API\n\n### assert.alters\n\nAsserts that the value returned by `changeWatcher`\nchanges after the `changer` function has run:\n                                                                                       \n```javascript\nlet x = 0;\nassert.alters(changer, changeWatcher);\n\nfunction changer() { x += 1; }\nfunction changeWatcher() { return x }\n```\n                                                                                       \nYou can pass options to be specific about the changes expected. Use the `from` \nkey to enforce a starting value, a `to` key for and ending value, and a\n`by` key to enforce a numeric change.\n                                                                                       \n```javascript\nassert.alters(() => { x += 1 }, () => x, { by: 1 });\nassert.alters(() => { x += 1 }, () => x, { from: x });\nassert.alters(() => { x += 1 }, () => x, { from: x, to: x + 1 });\nassert.alters(() => { x += 1 }, () => x, { to: x + 1 });\n```\n\n### assert.unaltered\n\nAsserts that the value returned by `changeWatcher`\ndoesn't change after the `changer` has run:\n                                                          \n```javascript\nlet x = 0;\nconst noop = () => undefined;\nassert.unaltered(noop, () => x);\n```\n\n## Asynchronous asserts\n\nBoth the `changer` and `changeWatcher` callbacks can return a promise, or take a node-style callback, with `error` as the first parameter. If you provide a callback you need to give a final `callback:` option to the change assertion, that is used to notify your test runner that the test is complete.\n\n### With promises\n\nMany test runners - for instance [mocha](https://github.com/mochajs/mocha) - support simply returning promises from `it()` or `test()` blocks to support asynchronous tsts. chai-change supports this style.\n\nIf your runner doesn't support returning promises, you can use the `.then()` method to call a callback based API etc (or use `callback:` as in the error-first callback docs below.\n\n```javascript\n\nit(\"creates a user\", () => {\n  let count = 0;\n  const User = {\n    create(attrs) {\n      return new Promise((resolve, reject) => {\n        setTimeout(() => {\n          count += 1\n          resolve();\n        });\n      });\n    },\n    count() {\n      return new Promise((resolve, reject) => {\n        setTimeout(() => {\n          resolve(count);\n        });\n      });\n    },\n  };\n\n  // when `changer` or `changeWatcher` returns a promise the expectation will return a promise as well\n  return expect(() => (\n    User.create({name: \"bob\"});\n  )).to.alter(() => (\n    User.count();\n  ),{\n    by: 1,\n  });\n})\n```\n\n### With error-first callback\n\n```javascript\nlet count = 0;\nconst User = {\n  create(attrs,cb) {\n    setTimeout(() => {\n      count += 1\n      cb();\n    });\n  },\n  count(cb) {\n    setTimeout(() => {\n      cb(null,count);\n    });\n  },\n};\n\nexpect((stepDone) => {\n  User.create({name: \"bob\"}, stepDone)\n}).to.alter((stepDone) => {\n  User.count(stepDone);\n},{\n  by: 1,\n  callback: done\n});\n```\n\n## Tests\n\nNode: `npm install && npm test`.\n\nBrowser: `npm install` then open `test/index.html`.\n\n## Changelog\n\n### 2.1\n\nPromise support - thanks to [@talyssonoc](https://github.com/talyssonoc)!\n\nBoth the `changeWatcher` and `changer` functions can now return promises. The expectation also returns a promise when used with promises, which can be used directly with mocha etc.\n\n### 2.0\n\n- *BREAKING CHANGE* Change whole API from `change` to `alter` to avoid the `.change` method added to chai in `chai@2.0.0`.\n","maintainers":[{"name":"timruffles","email":"timruffles@googlemail.com"}],"time":{"modified":"2016-11-08T17:01:16.796Z","created":"2014-03-23T12:21:57.165Z","0.0.0":"2014-03-23T12:21:58.679Z","1.0.0":"2014-05-27T21:18:04.450Z","1.0.1":"2016-09-23T15:35:40.563Z","1.0.2":"2016-09-23T15:38:00.716Z","2.0.0":"2016-09-23T15:40:27.052Z","2.0.1":"2016-09-23T15:42:21.750Z","2.0.2":"2016-09-23T15:43:25.797Z","2.1.0":"2016-10-25T13:15:11.936Z","2.1.1":"2016-10-31T11:15:31.817Z","2.1.2":"2016-11-08T17:01:16.796Z"},"readmeFilename":"README.md","keywords":["chai","assertions","assert","testing","chai-plugin"],"repository":{"type":"git","url":"git+ssh://git@github.com/timruffles/chai-change.git"},"author":{"name":"Tim Ruffles","email":"timruffles@googlemail.com"},"bugs":{"url":"https://github.com/timruffles/chai-change/issues"},"license":"BSD-2-Clause","homepage":"https://github.com/timruffles/chai-change#readme","_attachments":{}}